# project-playbills-mark

Playbills marking projects for LibCrowds, designed for use with the 
[libcrowds-bs4-pybossa-theme](https://github.com/LibCrowds/libcrowds-bs4-pybossa-theme).


## Creating a new project

Choose a set of tasks from [tasks.json](tasks/tasks.json) (e.g. `"performances"`) 
and either an Aleph system number from the file 
[ark_and_aleph_system_numbers.csv](tasks/ark_and_aleph_system_numbers.csv) or a 
JSON file where the info field contains the keys *aleph_sys_no*, *image_ark* 
and *regions*.

In reality, the `"performances"` tasks will be generated by 
entering the Aleph system number (and a new task will be created
for each image associated with that system number), whereas all other task sets 
will be generated from the results of a parent marking project (and a new task 
will be created for each permutation of an image, each region now associated 
with that image and each task in the chosen task set).

The idea is that we can chain tasks to highlight increasingly more specific 
regions in the text. For example, we can identify all of the performances listed 
in a playbill, then in a child task identify all of the actors associated with 
that performance. This should simplify the final data analysis process, avoiding 
issues that might otherwise be raised by overlapping regions etc.

To generate a new project using the inputs provided above and push it to the server 
install and configure [pbs](https://github.com/Scifabric/pbs), then:

```
python generate_project.py <task set> [--sysno=<sysno> or --json=<path>]
cd gen
pbs create_project
pbs add_tasks --tasks-file=tasks.csv
pbs update-task-redundancy --redundancy 3
pbs update_project
```

Visit the project settings page and update the category, webhook and 
thumbnail. The project is now ready to be published.


## Bad Ark Identifiers

Some of the ark identifiers in 
[ark_and_aleph_system_numbers.csv](tasks/ark_and_aleph_system_numbers.csv) do 
not point to images that can be retreived via the BL IIIF API. For now, these
rows are being moved to [bad_arks.csv](tasks/bad_arks.csv). If you receive an 
error message stating that a bad ark has been find while generating the project
just copy that row over to [bad_arks.csv](tasks/bad_arks.csv) and run the script
again. We'll deal with these later!